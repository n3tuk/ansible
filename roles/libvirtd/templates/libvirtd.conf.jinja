# {{ ansible_managed }}

# listen_addr = "::"

# libvirtd-tcp.service
# listen_tcp = 1
# tcp_port = "16509"
# tcp_min_ssf = 112
# auth_tcp = "sasl"

# libvirtd-tls.service
# listen_tls = 1
# tls_port = "16514"
# key_file = "/etc/pki/libvirt/private/serverkey.pem"
# cert_file = "/etc/pki/libvirt/servercert.pem"
# ca_file = "/etc/pki/CA/cacert.pem"
# crl_file = "/etc/pki/CA/crl.pem"

# TLS sockets already have encryption provided by the TLS
# layer, and limited authentication is done by certificates
# auth_tls = "none"

# unix_sock_dir = "/run/libvirt"
unix_sock_group = "libvirt"

unix_sock_admin_perms = "0770"
unix_sock_rw_perms = "0770"
unix_sock_ro_perms = "0770"
# Rely only on the user/group permissions of the socket
auth_unix_rw = "none"
auth_unix_ro = "none"

keepalive_interval = 5
keepalive_count = 6

# Processing controls
# The maximum number of concurrent client connections to allow
# over all sockets combined.
max_clients = 25
max_client_requests = 10
max_queued_clients = 10
max_anonymous_clients = 2

min_workers = 2
max_workers = 25

prio_workers = 5

admin_max_clients = 5
admin_max_queued_clients = 2
admin_max_client_requests = 5
admin_min_workers = 1
admin_max_workers = 5

# Logging level: 4 errors, 3 warnings, 2 information, 1 debug
# basically 1 will log everything possible
log_level = 4
# Audit Logging Level: 2 enable auditing, and exit if disabled on host
audit_level = 2
audit_logging = 1

# smbios: fetch the UUID from 'dmidecode -s system-uuid'
# machine-id: fetch the UUID from /etc/machine-id
host_uuid_source = "smbios"
